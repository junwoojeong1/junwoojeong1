<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <base href="./">
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="robots" content="index,follow">
  <title>정준우 — 온라인 명함</title>

  <!-- Fonts -->
  <link rel="preload" href="https://cdn.jsdelivr.net/gh/wanteddev/wanted-sans@v1.0.1/packages/wanted-sans/fonts/webfonts/variable/split/WantedSansVariable.min.css" as="style" onload="this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/wanteddev/wanted-sans@v1.0.1/packages/wanted-sans/fonts/webfonts/variable/split/WantedSansVariable.min.css"></noscript>
  <style>
    @font-face {
      font-family: 'NanumSquareRound';
      src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_two@1.0/NanumSquareRound.woff') format('woff');
      font-weight: normal;
      font-style: normal;
      font-display: swap;
    }
  </style>

  <style>
    /* ---------- Theme tokens (readability & glass shadow) ---------- */
    :root{
      --page-bg: #F4F3EE; /* slightly warm off-white */            /* light background (requested) */
      --card-bg: #FAF9F6; /* slightly warm card bg */
      --card-border: #FAF9F6;
      --text: #071226;               /* deep, modern ink */
      --muted: #55606a;              /* neutral muted */
      --accent: #0A84FF;             /* modern iOS blue */
      --accent-2: #6E75FF;           /* cool purple accent */
      --shadow: 0 24px 80px rgba(10,132,255,0.12); /* bluish glass shadow */
      --glass-blur: 14px;
      --card-radius: 28px;
      --district-stroke: rgba(10,14,24,0.18);
      --max-width:980px;
    }
    /* dark overrides */
    body.dark{
      --page-bg: #222222; /* deep warm-black per request */
      --card-bg: rgba(255,255,255,0.06);
      --card-border: rgba(255,255,255,0.06);
      --text: #e9eef8;
      --muted: #9fb7d6;
      --accent: #0A84FF;
      --accent-2: #7A80FF;
      --shadow: 0 24px 80px rgba(10,132,255,0.18);
      --glass-blur: 24px;
      --district-stroke: rgba(255,255,255,0.12);
     /* requested black background */
      --card-bg: rgba(255,255,255,0.04);
      --card-border: rgba(255,255,255,0.06);
      --text: #e9eef8;
      --muted: #9fb7d6;
      --accent: #0A84FF;
      --accent-2: #7A80FF;
      --shadow: 0 24px 80px rgba(10,132,255,0.18);
      --glass-blur: 24px;
      --district-stroke: rgba(255,255,255,0.12);
    
      --district-stroke: rgba(255,255,255,0.06);
    }

    *{box-sizing:border-box}
    html,body{height:100%;margin:0}
    body{font-family:'NanumSquareRound', Inter, 'Noto Sans KR', system-ui,-apple-system; background:var(--page-bg); color:var(--text); -webkit-font-smoothing:antialiased; display:flex;align-items:flex-start;justify-content:center;padding:28px;transition:background .28s ease,color .28s ease}

    /* subtle fixed texture background (no animation) */
    .bg-fixed{position:fixed;top:0;left:0;right:0;bottom:0;z-index:-9999;opacity:0.12;pointer-events:none;background-image: url('data:image/png;base64,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');background-repeat:repeat;background-size:220px auto;mix-blend-mode:overlay;}

    .stage{position:relative;z-index:10;width:100%;max-width:var(--max-width)}
    .header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:18px}
    .logo{display:flex;align-items:center;gap:10px;font-weight:700;color:var(--accent);text-decoration:none}

    /* Theme buttons */
    .theme-controls{display:flex;gap:8px;align-items:center}
    .theme-btn{appearance:none;border:0;padding:8px 12px;border-radius:999px;background:transparent;color:var(--muted);cursor:pointer;font-weight:700;border:1px solid transparent;transition:all .18s ease}
    .theme-btn.active{background:linear-gradient(90deg, rgba(0,122,255,0.12), rgba(110,117,255,0.06));color:var(--accent);box-shadow:0 6px 20px rgba(0,122,255,0.08);border-color:rgba(0,122,255,0.08)}

    /* CARD: glass */
    .card{display:grid;grid-template-columns:320px 1fr;gap:22px;background:var(--card-bg);border-radius:var(--card-radius);padding:26px;box-shadow:var(--shadow);backdrop-filter:blur(var(--glass-blur));-webkit-backdrop-filter:blur(var(--glass-blur));border:1px solid var(--card-border);overflow:hidden;position:relative;transition:background .25s ease,box-shadow .25s ease}
    .card::before{content:'';position:absolute;inset:0;border-radius:inherit;pointer-events:none;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));mix-blend-mode:overlay}
    /* glossy specular highlight for stronger glass feeling */
    .card::after{content:'';position:absolute;inset:0;border-radius:inherit;pointer-events:none;background:linear-gradient(135deg, rgba(255,255,255,0.10), rgba(255,255,255,0.04) 36%, rgba(255,255,255,0) 60%);mix-blend-mode:overlay;opacity:1}
    /* ensure portrait has specular sheen */
    .portrait-wrap{position:relative}
    .portrait-wrap::after{content:'';position:absolute;inset:0;border-radius:inherit;pointer-events:none;background:linear-gradient(180deg, rgba(255,255,255,0.22), rgba(255,255,255,0.05) 28%, rgba(255,255,255,0) 60%);mix-blend-mode:soft-light;}
    /* subtle inner highlight for depth */
    .card-inner-shadow{position:absolute;inset:0;border-radius:inherit;box-shadow:inset 0 1px 0 rgba(255,255,255,0.5), inset 0 -20px 40px rgba(10,132,255,0.06);pointer-events:none}

    .hero{display:flex;flex-direction:column;align-items:center;gap:14px;padding:6px}
    .portrait-wrap{width:300px;max-width:78%;aspect-ratio:1/1;border-radius:36px;overflow:hidden;box-shadow:0 18px 50px rgba(16,24,40,0.06);border:1px solid rgba(255,255,255,0.06);background:linear-gradient(135deg,#ffffff,#f1f6ff)}
    body.dark .portrait-wrap{border:1px solid rgba(255,255,255,0.06);box-shadow:0 18px 60px rgba(2,6,23,0.6);background:linear-gradient(135deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01))}
    .portrait-wrap img{width:100%;height:100%;object-fit:cover;display:block}
    .kicker{font-size:13px;color:var(--muted);text-align:center}

    .meta{display:flex;flex-direction:column;gap:6px}
    .meta h1{margin:0;font-size:34px;font-family:'Wanted Sans Variable','Wanted Sans',system-ui,Roboto,sans-serif;font-weight:700;color:var(--text)}
    .meta .role{color:var(--muted);font-size:13px}
    .desc{color:var(--muted);font-family:'NanumSquareRound',system-ui,-apple-system,'Segoe UI',Roboto,'Noto Sans KR',sans-serif;line-height:1.6}

    .profile-box{margin-top:12px;padding:10px;border-radius:18px;background:linear-gradient(180deg,rgba(255,255,255,0.88),rgba(255,255,255,0.84));border:1px solid rgba(16,24,40,0.03);box-shadow:0 6px 18px rgba(16,24,40,0.04)}
    body.dark .profile-box{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.04);box-shadow:0 8px 24px rgba(2,6,23,0.45)}

    .contact{display:flex;flex-direction:column;gap:12px;margin-top:14px}
    .chips{display:flex;gap:10px;flex-wrap:wrap}
    .chip{display:inline-flex;align-items:center;gap:10px;padding:10px 16px;border-radius:999px;background:linear-gradient(180deg,rgba(255,255,255,0.98),rgba(255,255,255,0.96));border:1px solid rgba(16,24,40,0.04);color:var(--text);text-decoration:none;box-shadow:0 6px 18px rgba(16,24,40,0.04);font-weight:600}
    body.dark .chip{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.04);box-shadow:0 8px 24px rgba(2,6,23,0.35);color:var(--text)}

    .actions{display:flex;gap:12px;margin-top:10px}
    .btn{display:inline-flex;align-items:center;gap:10px;padding:10px 16px;border-radius:999px;border:0;cursor:pointer;font-weight:700;color:white;background:linear-gradient(180deg,var(--accent),var(--accent-2));box-shadow:0 12px 30px rgba(10,132,255,0.14);transition:transform .12s ease}
    .btn.ghost{background:transparent;color:var(--accent);border:1px solid rgba(0,122,255,0.12);box-shadow:none}

    .card-foot{grid-column:1/-1;padding:12px 18px;color:var(--muted);font-size:13px;text-align:center}

    /* portfolio map */
    .portfolio{margin-top:18px;padding:18px;border-radius:18px;background:transparent;opacity:0;transform:translateY(24px);transition:opacity .6s ease, transform .6s cubic-bezier(.2,.9,.3,1)}
    .portfolio.visible{opacity:1;transform:none}
    .map-wrap{width:100%;height:420px;border-radius:14px;overflow:hidden;border:1px solid rgba(16,24,40,0.04);background:var(--card-bg)}
    body.dark .map-wrap{border:1px solid rgba(255,255,255,0.04)}

    /* SVG district styling - stronger stroke in light */
    svg .district{fill:transparent;stroke:var(--district-stroke);stroke-width:1.8;transition:fill .18s ease,stroke-width .12s ease}
    svg .district:hover, svg .district[data-hover]{fill: rgba(10,132,255,0.12);stroke-width:2.2}
    body.dark svg .district:hover, body.dark svg .district[data-hover]{fill: rgba(10,132,255,0.12);}

    /* cards animation on scroll */
    .fade-in{opacity:0;transform:translateY(10px);transition:opacity .48s ease, transform .48s cubic-bezier(.2,.9,.3,1)}
    .fade-in.visible{opacity:1;transform:none}

    /* responsive */
    @media (max-width:960px){ .card{grid-template-columns:280px 1fr} }
    @media (max-width:720px){ body{padding:16px} .card{grid-template-columns:1fr;gap:12px;padding:18px} .portrait-wrap{max-width:56%;border-radius:28px} .meta h1{font-size:26px} .map-wrap{height:320px} }
    @media (max-width:420px){ .portrait-wrap{max-width:64%} .meta h1{font-size:20px} }
  </style>
</head>
<body>
  <div class="bg-fixed" aria-hidden="true"></div>

  <div class="stage">
    <header class="header">
      <a class="logo" href="#" aria-label="홈"><svg width="36" height="36" viewBox="0 0 24 24" fill="none" aria-hidden><rect x="2" y="2" width="20" height="20" rx="5" fill="var(--accent)" opacity="0.08"></rect><path d="M6 8h12M6 14h12" stroke="var(--accent)" stroke-opacity="0.9" stroke-width="1.2" stroke-linecap="round"></path></svg><span style="color:var(--accent)">정준우</span></a>

      <div style="display:flex;gap:8px;align-items:center">
        <div class="theme-controls" role="toolbar" aria-label="테마">
          <button id="theme-light" class="theme-btn" title="Light theme">☀︎ Light</button>
          <button id="theme-dark" class="theme-btn" title="Dark theme">☾ Dark</button>
        </div>

        <div style="width:10px"></div>
        <div class="lang"><button id="btn-ko" class="active" aria-pressed="true">한국어</button><button id="btn-en" aria-pressed="false">English</button></div>
      </div>
    </header>

    <main class="card fade-in visible" id="card-view" role="main" aria-labelledby="title">
      <section class="hero">
        <div class="portrait-wrap">
          <img id="portrait-img" src="assets/IMG_9121.JPEG" alt="정준우 프로필" onerror="this.style.display='none'">
        </div>
      </section>

      <section>
        <div class="meta">
          <h1 id="title">정준우</h1>
          <div class="role" id="role">서울 사진· 영상 제작자</div>
        </div>

        <div class="profile-box">
          <p class="desc" id="desc" style="margin:0 0 36px 0;white-space:pre-wrap">다양한 서울을 사진과 영상으로 표현합니다.<br><br>활동은 하단의 인스타그램에서 확인하실 수 있습니다.<br>문의사항은 하단의 이메일로 부탁드립니다.</p>

          <h3 style="margin:0 0 0px 0;color:var(--muted);font-size:14px">Profile</h3>
          <div id="profile-list" aria-label="프로필 목록" style="min-height:10px;padding:4px;border-radius:8px;border:1px dashed rgba(16,24,40,0.04);color:var(--muted);white-space:pre-wrap;overflow:auto;margin-top:4px;">
            <ul style="list-style:none;margin:0;padding:4px 0 0 0;display:flex;flex-direction:column;gap:8px">
              <li><a href="#" class="career-link" data-id="c2022-1" style="font-family:'NanumSquareRound',serif;color:var(--muted);text-decoration:none;font-size:15px">2022</a></li>
              <li><a href="#" class="career-link" data-id="c2022-2" style="font-family:'NanumSquareRound',serif;color:var(--muted);text-decoration:none;font-size:15px"> 서울영상공모전 수상</a></li>
              <li><a href="#" class="career-link" data-id="c2023-1" style="font-family:'NanumSquareRound',serif;color:var(--muted);text-decoration:none;font-size:15px">2023</a></li>
              <li><a href="#" class="career-link" data-id="c2023-2" style="font-family:'NanumSquareRound',serif;color:var(--muted);text-decoration:none;font-size:15px"> 부산광역시 뉴미디어멤버스, 부산광역시장 표창</a></li>
              <li><a href="#" class="career-link" data-id="c2023-3" style="font-family:'NanumSquareRound',serif;color:var(--muted);text-decoration:none;font-size:15px"> TikTok 포토 크리에이터 활동</a></li>
              <li><a href="#" class="career-link" data-id="c2023-4" style="font-family:'NanumSquareRound',serif;color:var(--muted);text-decoration:none;font-size:15px"> 청소년 도서에 사진 수록</a></li>
              <li><a href="#" class="career-link" data-id="c2023-5" style="font-family:'NanumSquareRound',serif;color:var(--muted);text-decoration:none;font-size:15px"> 한국청소년사진공모전 은상·동상</a></li>
              <li><a href="#" class="career-link" data-id="c2023-6" style="font-family:'NanumSquareRound',serif;color:var(--muted);text-decoration:none;font-size:15px"> 강남구 영상 공모전 제1·2회 베스트제작상</a></li>
              <li><a href="#" class="career-link" data-id="c2024-1" style="font-family:'NanumSquareRound',serif;color:var(--muted);text-decoration:none;font-size:15px">2024</a></li>
              <li><a href="#" class="career-link" data-id="c2024-2" style="font-family:'NanumSquareRound',serif;color:var(--muted);text-decoration:none;font-size:15px"> 영등포구 SNS미디어기자단, 영등포구청장 표창</a></li>
              <li><a href="#" class="career-link" data-id="c2024-3" style="font-family:'NanumSquareRound',serif;color:var(--muted);text-decoration:none;font-size:15px"> 서울시 제작지원: 서울세계불꽃축제 협업 촬영</a></li>
              <li><a href="#" class="career-link" data-id="c2024-4" style="font-family:'NanumSquareRound',serif;color:var(--muted);text-decoration:none;font-size:15px"> 서울특별시 특별함이일상이되는순간 챌린지 서울상(1등상)</a></li>
              <li><a href="#" class="career-link" data-id="c2024-5" style="font-family:'NanumSquareRound',serif;color:var(--muted);text-decoration:none;font-size:15px"> 한국청소년 사진제 우수상</a></li>
              <li><a href="#" class="career-link" data-id="c2024-6" style="font-family:'NanumSquareRound',serif;color:var(--muted);text-decoration:none;font-size:15px">2023-2025 서울시민기자</a></li>
            </ul>
            <small style="display:block;margin-top:0px;color:var(--muted)">각 항목을 누르면 세부 페이지가 뜹니다.</small>
          </div>

          <div class="contact" style="margin-top:12px">
            <h3 style="margin:0;color:var(--muted);font-size:14px">Profile</h3>
            <div class="chips">
              <a class="chip" id="email-link" href="mailto:luxetjun@naver.com">luxetjun@naver.com</a>
              <a class="chip" id="phone-link" href="tel:01026090250">010-2609-0250</a>
              <a class="chip" id="instagram" href="https://instagram.com/_junsome" target="_blank" rel="noopener">@_junsome</a>
            </div>
            <div class="actions">
              <button class="btn" id="download-vcard">vCard 다운로드</button>
              <button class="btn ghost" id="copy-email">이메일 복사</button>
            </div>
          </div>
        </div>
      </section>

      <div class="card-foot">Made with care • 정준우 — Responsive · Mobile-optimized</div>
    </main>

    <section id="portfolio-view" class="portfolio" aria-hidden="false">
      <h2 style="margin:6px 0;color:var(--text)">작품 활동 — 서울 지도로 보기</h2>
      <div class="map-wrap">
        <div id="map-inner" class="map-inner" style="width:100%;height:100%;display:flex;align-items:center;justify-content:center">
          <div id="svg-container" style="width:100%;height:100%"></div>
        </div>
      </div>
      <div style="color:var(--muted);font-size:13px;margin-top:8px">지도를 클릭하면 아래에 해당 장소의 작품 목록이 열립니다.</div>
    </section>

    <aside id="detail" class="detail-panel" role="dialog" aria-hidden="true">
      <div class="head" style="display:flex;justify-content:space-between;align-items:center"><strong id="detail-title" style="font-size:20px;color:var(--text)"></strong><div style="display:flex;gap:8px"><button id="open-detail-page" class="chip">상세 페이지 열기</button><button id="close-detail" class="chip">닫기</button></div></div>
      <div class="content" id="detail-content">지도를 클릭하세요.</div>
    </aside>
  </div>

  <script>
    const $ = id => document.getElementById(id);

    // Theme buttons (reliable)
    const themeLightBtn = $('theme-light');
    const themeDarkBtn = $('theme-dark');
    function setTheme(theme){
      if(theme === 'dark') document.body.classList.add('dark');
      else document.body.classList.remove('dark');
      // visual state on buttons
      if(themeLightBtn) themeLightBtn.classList.toggle('active', theme === 'light');
      if(themeDarkBtn) themeDarkBtn.classList.toggle('active', theme === 'dark');
      try{ localStorage.setItem('site_theme', theme); }catch(e){}
    }
    themeLightBtn && themeLightBtn.addEventListener('click', ()=> setTheme('light'));
    themeDarkBtn && themeDarkBtn.addEventListener('click', ()=> setTheme('dark'));
    // init default -> LIGHT per request
    (function(){ const saved = localStorage.getItem('site_theme'); if(saved === 'dark' || saved === 'light'){ setTheme(saved); } else { setTheme('light'); } })();

    // language toggle
    const btnKo = $('btn-ko'), btnEn = $('btn-en');
    const i18n = { ko:{contact:'Contact',vcard:'vCard 다운로드',copy:'이메일 복사'}, en:{contact:'Contact',vcard:'Download vCard',copy:'Copy email'} };
    function applyLang(lang){ if(!i18n[lang]) return; const ch = document.querySelector('.profile-box h3'); if(ch) ch.textContent = i18n[lang].contact; const vb = $('download-vcard'); if(vb) vb.textContent = i18n[lang].vcard; const cb = $('copy-email'); if(cb) cb.textContent = i18n[lang].copy; if(lang==='ko'){ btnKo.classList.add('active'); btnEn.classList.remove('active'); btnKo.setAttribute('aria-pressed','true'); btnEn.setAttribute('aria-pressed','false'); } else { btnEn.classList.add('active'); btnKo.classList.remove('active'); btnEn.setAttribute('aria-pressed','true'); btnKo.setAttribute('aria-pressed','false'); } localStorage.setItem('site_lang',lang); }
    btnKo && btnKo.addEventListener('click', ()=>applyLang('ko'));
    btnEn && btnEn.addEventListener('click', ()=>applyLang('en'));
    (function(){ const saved = localStorage.getItem('site_lang') || (navigator.language && navigator.language.startsWith('en') ? 'en':'ko'); applyLang(saved); })();

    // careers data
    const careers = [ {id:'c2022-2', title:'서울영상공모전 수상 (2022)', desc:'서울영상공모전에서 수상하며 영상 제작 역량을 인정받음.', img:'assets/IMG_9121.JPEG'}, {id:'c2023-2', title:'부산광역시 뉴미디어멤버스(2023)', desc:'부산광역시 뉴미디어멤버스 활동으로 부산의 여러 모습을 인스타그램에서 홍보했습니다.<br>우수 활동자(타지역 중 상위1인)로 선정되어 부산광역시장 표창을 수여받았습니다.', img:'assets/IMG_9121.JPEG'}, {id:'c2023-3', title:'TikTok 포토 크리에이터 활동(2023)', desc:'TikTok에서 포토 크리에이터로 활동하였습니다.', img:'assets/IMG_9121.JPEG'}, {id:'c2023-4', title:'기상기후사진공모전 수상 및 청소년 도서 수록(2023)', desc:'기상청 주최의 기상기후사진공모전에서 입선하였습니다.<br>출판사의 요청으로 청소년 도서 "궁금했어, 기후변화(나무생각)"에 수록되었습니다.', img:'assets/IMG_9121.JPEG'}, {id:'c2023-5', title:'한국청소년사진공모전 수상 (2023)', desc:'은상·동상 수상.', img:'assets/IMG_9121.JPEG'}, {id:'c2024-2', title:'영등포구 SNS미디어기자단 활동(2024)', desc:'영등포구 SNS미디어기자단으로써 한 해동안 영등포구의 도시 매력을 홍보하였습니다.<br>최종적으로 상위 3인에 선정되어 영등포구청장 표창을 수여받았습니다.', img:'assets/IMG_9121.JPEG'}, {id:'c2024-3', title:'서울세계불꽃축제 홍보물 제작(2024))', desc:'서울시청의 제작지원을 받아 2024서울세계불꽃축제를 촬영하고 홍보물을 제작하였습니다.<br>제작한 홍보물은 서울시 SNS홍보자료로 활용되어 매우 높은 조회수를 기록하였습니다.', img:'assets/IMG_9121.JPEG'},  ];

    function escapeHtml(s){ return (s||'').toString().replace(/[&<>\"']/g, ch=>({'&':'&amp;','<':'&lt;','>':'&gt;','\"':'&quot;',"'":"&#39;"}[ch])); }
    function openCareerPage(id){ const c = careers.find(x=>x.id===id); if(!c) return alert('찾을 수 없습니다'); const html = `<!doctype html><html lang="ko"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>${escapeHtml(c.title)}</title><style>body{margin:0;font-family:Inter,Arial;background:linear-gradient(180deg,#f6f8fb,#f0f4fb);color:#0f1720;padding:24px;display:flex;align-items:center;justify-content:center} .card{max-width:880px;width:100%;background:#fff;padding:28px;border-radius:18px;box-shadow:0 20px 60px rgba(16,24,40,0.06)} h1{margin:0 0 12px 0;font-size:28px;color:#0f1720} p{color:#475569;line-height:1.6} .media{display:flex;gap:16px;align-items:flex-start;margin-top:16px} .media img{width:320px;max-width:40%;height:auto;border-radius:12px;object-fit:cover} @media(max-width:600px){.media{flex-direction:column}.media img{max-width:100%;width:100%}}</style></head><body><div class="card"><h1>${escapeHtml(c.title)}</h1><p>${escapeHtml(c.desc)}</p><div class="media"><img src="${c.img}" alt="${escapeHtml(c.title)}"><div style="flex:1"></div></div></div></body></html>`; const blob=new Blob([html],{type:'text/html'}); window.open(URL.createObjectURL(blob),'_blank'); }

    document.addEventListener('click', function(e){ const a = e.target.closest && e.target.closest('.career-link'); if(a){ e.preventDefault(); openCareerPage(a.getAttribute('data-id')); } }, false);

    // SVG map
    const SVG_URL = 'https://upload.wikimedia.org/wikipedia/commons/a/ae/Seoul_districts.svg';
    async function loadSVG(){ const container = $('svg-container'); if(!container) return; try{ const res = await fetch(SVG_URL); if(!res.ok) throw new Error('SVG fetch failed'); const text = await res.text(); container.innerHTML = text; const svg = container.querySelector('svg'); if(svg) attachDistrictHandlers(svg); }catch(e){ console.warn('svg failed',e); container.innerHTML = '<svg viewBox="0 0 1000 900" xmlns="http://www.w3.org/2000/svg"><g id="districts"><path id="jongno" class="district" data-name="종로구" d="M220,120 L380,110 L420,200 L310,240 L230,200 Z" /></g></svg>'; const svg = container.querySelector('svg'); if(svg) attachDistrictHandlers(svg); } }

    function attachDistrictHandlers(svg){ try{ svg.setAttribute('width','100%'); svg.setAttribute('height','100%'); svg.style.width='100%'; svg.style.height='100%'; svg.style.display='block'; const nodes = svg.querySelectorAll('[id]'); nodes.forEach(n=>{ if(!n.classList.contains('district')) n.classList.add('district'); n.style.touchAction='manipulation'; n.style.cursor = 'pointer'; n.setAttribute('role','button'); const name = n.getAttribute('data-name') || n.id || '구'; n.setAttribute('tabindex','0'); n.setAttribute('aria-label', name); const handler = (e)=>{ if(e && e.preventDefault) e.preventDefault(); const id = n.id || ''; const nm = n.getAttribute('data-name') || n.getAttribute('inkscape:label') || n.getAttribute('name') || id; openDistrictDetail(id || nm, nm); }; n.addEventListener('click', handler); n.addEventListener('touchstart', (ev)=>{ if(ev && ev.preventDefault) ev.preventDefault(); handler(ev); }, {passive:false}); n.addEventListener('keydown', (ev)=>{ if(ev.key === 'Enter' || ev.key === ' ') { if(ev && ev.preventDefault) ev.preventDefault(); handler(ev); } }); n.addEventListener('pointerenter', ()=> n.setAttribute('data-hover','1')); n.addEventListener('pointerleave', ()=> n.removeAttribute('data-hover')); }); }catch(err){ console.warn('attachDistrictHandlers error', err); } }

    // storage helpers, submissions, image functions (unchanged)
    const dbPromise = (function(){ return new Promise((resolve,reject)=>{ const req = indexedDB.open('junsome-db',1); req.onupgradeneeded = ()=>{ const db = req.result; if(!db.objectStoreNames.contains('images')) db.createObjectStore('images',{keyPath:'id'}); }; req.onsuccess = ()=>resolve(req.result); req.onerror = ()=>reject(req.error); }); })();
    async function saveImageBlob(id,file){ const db = await dbPromise; return new Promise((res,rej)=>{ const tx=db.transaction('images','readwrite'); tx.objectStore('images').put({id,blob:file}); tx.oncomplete = ()=>res(id); tx.onerror=()=>rej(tx.error); }); }
    async function getImageBlob(id){ const db = await dbPromise; return new Promise((res,rej)=>{ const tx=db.transaction('images','readonly'); const rq=tx.objectStore('images').get(id); rq.onsuccess=()=>res(rq.result?rq.result.blob:null); rq.onerror=()=>rej(rq.error); }); }
    function submissionsKey(id){ return 'submissions_' + id; }
    function loadSubmissions(id){ try{ const raw = localStorage.getItem(submissionsKey(id)); return raw ? JSON.parse(raw) : []; }catch(e){ return []; } }
    function saveSubmissions(id,arr){ localStorage.setItem(submissionsKey(id), JSON.stringify(arr)); }
    function ensureSubpages(count){ let meta=null; try{ meta=JSON.parse(localStorage.getItem('subpages_meta')||'null'); }catch(e){ meta=null; } if(!meta||!Array.isArray(meta.pages)||meta.pages.length<count){ meta={pages:[]}; for(let i=1;i<=count;i++){ const id='subpage_'+i; meta.pages.push({id,title:'하위 페이지 '+i,assignedTo:null}); if(localStorage.getItem(submissionsKey(id))===null) localStorage.setItem(submissionsKey(id),JSON.stringify([])); } localStorage.setItem('subpages_meta',JSON.stringify(meta)); } return meta; }
    function getOrAssignSubpageForDistrict(districtId,districtName){ if(!districtId) return districtId||districtName; let meta=null; try{ meta=JSON.parse(localStorage.getItem('subpages_meta')||'null'); }catch(e){ meta=null; } if(!meta||!Array.isArray(meta.pages)) meta=ensureSubpages(25); let page = meta.pages.find(p=>p.assignedTo===districtId); if(!page){ page = meta.pages.find(p=>!p.assignedTo); if(page){ page.assignedTo=districtId; if(districtName) page.title=districtName; localStorage.setItem('subpages_meta',JSON.stringify(meta)); } else return districtId; } return page.id; }

    // simplified createSubmissionCard & related functions (unchanged behavior)
    function createSubmissionCard(item,key){ const c=document.createElement('div'); c.className='project-card'; const img=document.createElement('img'); img.alt=item.title||''; img.style.width='100%'; img.style.height='140px'; img.style.objectFit='cover'; img.style.borderRadius='8px'; img.style.background='rgba(0,0,0,0.04)'; if(item.img) img.src = item.img; else if(item.imgKey){ getImageBlob(item.imgKey).then(b=>{ if(b) img.src = URL.createObjectURL(b); }); } const h=document.createElement('h4'); h.textContent=item.title||''; const p=document.createElement('p'); p.textContent=item.desc||''; c.appendChild(img); c.appendChild(h); c.appendChild(p); const actions=document.createElement('div'); actions.style.display='flex'; actions.style.gap='8px'; actions.style.marginTop='8px'; const editBtn=document.createElement('button'); editBtn.className='chip'; editBtn.textContent='수정'; const delBtn=document.createElement('button'); delBtn.className='chip'; delBtn.textContent='삭제'; actions.appendChild(editBtn); actions.appendChild(delBtn); c.appendChild(actions); editBtn.addEventListener('click', ()=>openEditDialog(item,key,c)); delBtn.addEventListener('click', ()=>{ if(confirm('정말 삭제하시겠습니까?')){ const arr=loadSubmissions(key); const idx=arr.findIndex(x=>x.id===item.id); if(idx>-1){ arr.splice(idx,1); saveSubmissions(key,arr); c.remove(); } } }); return c; }
    function openEditDialog(item,key,cardElement){ const form=document.createElement('div'); form.style.display='flex'; form.style.flexDirection='column'; form.style.gap='8px'; form.style.marginTop='8px'; const title=document.createElement('input'); title.value=item.title||''; title.style.padding='8px'; title.style.borderRadius='8px'; title.style.background='transparent'; title.style.border='1px solid rgba(255,255,255,0.04)'; title.style.color='var(--text)'; const desc=document.createElement('textarea'); desc.value=item.desc||''; desc.rows=3; desc.style.padding='8px'; desc.style.borderRadius='8px'; desc.style.background='transparent'; desc.style.border='1px solid rgba(255,255,255,0.04)'; desc.style.color='var(--text)'; const file=document.createElement('input'); file.type='file'; file.accept='image/*'; const save=document.createElement('button'); save.className='btn'; save.textContent='저장'; const cancel=document.createElement('button'); cancel.className='chip'; cancel.textContent='취소'; form.appendChild(title); form.appendChild(desc); form.appendChild(file); form.appendChild(save); form.appendChild(cancel); cardElement.appendChild(form); let newFile=null; file.addEventListener('change',(e)=>{ newFile = e.target.files && e.target.files[0]; }); cancel.addEventListener('click', ()=>form.remove()); save.addEventListener('click', async ()=>{ const arr=loadSubmissions(key); const idx=arr.findIndex(x=>x.id===item.id); if(idx>-1){ arr[idx].title = title.value.trim()||arr[idx].title; arr[idx].desc = desc.value.trim()||arr[idx].desc; if(newFile){ const k = 'img_' + Date.now(); await saveImageBlob(k,newFile); arr[idx].imgKey = k; } saveSubmissions(key,arr); cardElement.querySelector('h4').textContent = arr[idx].title; cardElement.querySelector('p').textContent = arr[idx].desc; if(arr[idx].imgKey){ const b = await getImageBlob(arr[idx].imgKey); if(b) cardElement.querySelector('img').src = URL.createObjectURL(b); } form.remove(); } }); }

    async function renderDetailContent(pageKey, displayName){ const content = $('detail-content'); content.innerHTML=''; const formWrap=document.createElement('div'); formWrap.style.marginBottom='12px'; formWrap.style.background='linear-gradient(180deg,rgba(255,255,255,0.01),rgba(255,255,255,0.008))'; formWrap.style.padding='12px'; formWrap.style.borderRadius='10px'; const h3=document.createElement('h3'); h3.style.margin='0 0 12px 0'; h3.style.color='var(--text)'; h3.textContent='내 작품 등록'; const p=document.createElement('p'); p.style.color='var(--muted)'; p.style.margin='0 0 12px 0'; p.textContent='사진과 간단한 설명을 업로드하세요. 업로드 후에는 수정 및 삭제가 가능합니다.'; const inputTitle=document.createElement('input'); inputTitle.placeholder='작품 제목'; inputTitle.style.padding='8px'; inputTitle.style.borderRadius='8px'; inputTitle.style.border='1px solid rgba(255,255,255,0.04)'; inputTitle.style.background='transparent'; inputTitle.style.color='var(--text)'; const inputDesc=document.createElement('textarea'); inputDesc.placeholder='간단한 설명'; inputDesc.rows=3; inputDesc.style.padding='8px'; inputDesc.style.borderRadius='8px'; inputDesc.style.border='1px solid rgba(255,255,255,0.04)'; inputDesc.style.background='transparent'; inputDesc.style.color='var(--text)'; const inputFile=document.createElement('input'); inputFile.type='file'; inputFile.accept='image/*'; const controls=document.createElement('div'); controls.style.display='flex'; controls.style.gap='8px'; controls.style.alignItems='center'; const uploadBtn=document.createElement('button'); uploadBtn.className='btn'; uploadBtn.textContent='업로드'; const previewBox=document.createElement('div'); previewBox.style.width='84px'; previewBox.style.height='64px'; previewBox.style.borderRadius='8px'; previewBox.style.background='rgba(255,255,255,0.02)'; previewBox.style.display='none'; previewBox.style.overflow='hidden'; const previewImg=document.createElement('img'); previewImg.style.width='100%'; previewImg.style.height='100%'; previewImg.style.objectFit='cover'; previewBox.appendChild(previewImg); controls.appendChild(uploadBtn); controls.appendChild(previewBox); formWrap.appendChild(h3); formWrap.appendChild(p); formWrap.appendChild(inputTitle); formWrap.appendChild(inputDesc); formWrap.appendChild(inputFile); formWrap.appendChild(controls); content.appendChild(formWrap); const key = pageKey || displayName || 'global'; const subs = loadSubmissions(key); const userGrid=document.createElement('div'); userGrid.style.display='grid'; userGrid.style.gridTemplateColumns='repeat(auto-fill,minmax(220px,1fr))'; userGrid.style.gap='12px'; subs.forEach(s=>userGrid.appendChild(createSubmissionCard(s,key))); content.appendChild(userGrid); let currentBlob=null; inputFile.addEventListener('change',(e)=>{ const f=e.target.files && e.target.files[0]; if(!f) return; if(!f.type.startsWith('image/')) return alert('이미지 파일을 선택하세요.'); previewImg.src = URL.createObjectURL(f); previewBox.style.display='block'; currentBlob = f; }); uploadBtn.addEventListener('click', async ()=>{ const title = inputTitle.value.trim() || '무제'; const desc = inputDesc.value.trim() || ''; if(!currentBlob) return alert('업로드할 이미지를 선택하세요.'); const arr = loadSubmissions(key); const itemId = 's_' + Date.now(); await saveImageBlob(itemId,currentBlob); const item = { id:itemId, title, desc, imgKey:itemId, createdAt:Date.now() }; arr.unshift(item); saveSubmissions(key,arr); userGrid.insertBefore(createSubmissionCard(item,key), userGrid.firstChild); inputTitle.value=''; inputDesc.value=''; inputFile.value=''; previewBox.style.display='none'; previewImg.src=''; currentBlob=null; }); }

    function openDistrictDetail(id,name){ const pageKey = getOrAssignSubpageForDistrict(id,name); $('detail-title').textContent = name || pageKey; renderDetailContent(pageKey,name); const d=$('detail'); d.classList.add('active'); d.setAttribute('aria-hidden','false'); }

    ensureSubpages(25); loadSVG();

    // close detail
    const closeDetail = $('close-detail'); if(closeDetail) closeDetail.addEventListener('click', ()=>{ const d=$('detail'); d.classList.remove('active'); d.setAttribute('aria-hidden','true'); });

    // reveal animation
    const io = new IntersectionObserver((entries)=>{ entries.forEach(e=>{ if(e.isIntersecting) e.target.classList.add('visible'); }); },{threshold:0.12}); document.querySelectorAll('.fade-in').forEach(el=>io.observe(el));

    // portfolio reveal on scroll
    (function(){ const p = $('portfolio-view'); if(!p) return; const pIo = new IntersectionObserver((entries, obs)=>{ entries.forEach(en=>{ if(en.isIntersecting){ en.target.classList.add('visible'); obs.unobserve(en.target); } }); }, {threshold:0.08}); pIo.observe(p); })();

    // copy email
    const copyBtn = $('copy-email'); if(copyBtn){ copyBtn.addEventListener('click', async ()=>{ try{ await navigator.clipboard.writeText('luxetjun@naver.com'); copyBtn.textContent='복사됨'; setTimeout(()=>copyBtn.textContent = (localStorage.getItem('site_lang')==='en'?'Copy email':'이메일 복사'),1500); }catch(e){ alert('복사 실패'); } }); }

    // vCard
    const vbtn = $('download-vcard'); if(vbtn){ vbtn.addEventListener('click', ()=>{ const vcard = `BEGIN:VCARD
VERSION:3.0
FN:정준우
EMAIL;TYPE=INTERNET:luxetjun@naver.com
TEL;TYPE=CELL:010-2609-0250
END:VCARD`; const blob = new Blob([vcard],{type:'text/vcard'}); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = 'jung_junwoo.vcf'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url); }); }
  </script>
</body>
</html>
